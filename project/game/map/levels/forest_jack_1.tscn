[gd_scene load_steps=19 format=3 uid="uid://6oyki3ks7u4l"]

[ext_resource type="Script" path="res://game/map/levels/forest_jack_1.gd" id="1_qp3s0"]
[ext_resource type="PackedScene" uid="uid://cxt2kq60nakfn" path="res://game/characters/player.tscn" id="2_3qudn"]
[ext_resource type="PackedScene" uid="uid://dd0kl255gfdkd" path="res://game/map/interactables/block.tscn" id="2_jganh"]
[ext_resource type="Texture2D" uid="uid://by8cb06jr4pm1" path="res://art/Background Assets/forest_s.png" id="2_r3cgq"]
[ext_resource type="PackedScene" uid="uid://dm4xqlc144gxx" path="res://game/characters/toy.tscn" id="3_opt1u"]
[ext_resource type="PackedScene" uid="uid://mkoy0yv4trc6" path="res://game/map/obstacles/vine_door.tscn" id="3_p1av2"]
[ext_resource type="PackedScene" uid="uid://b0xbrb221dj6h" path="res://game/map/interactables/block_button.tscn" id="4_b62as"]
[ext_resource type="PackedScene" uid="uid://baupxuhlutjnh" path="res://game/ui/dialogue_manager.tscn" id="4_ull83"]
[ext_resource type="PackedScene" uid="uid://cbd1bti25e811" path="res://game/map/cosmetics/bush_forward_end.tscn" id="5_sivg2"]
[ext_resource type="PackedScene" uid="uid://b2i6551t30h8f" path="res://game/map/interactables/forest_exit.tscn" id="6_0wnkg"]
[ext_resource type="PackedScene" uid="uid://dfs7qkxlas2oe" path="res://game/map/cosmetics/bush_forward_middle.tscn" id="6_5pwi4"]
[ext_resource type="Script" path="res://game/common/interactable.gd" id="7_5s208"]
[ext_resource type="PackedScene" uid="uid://dqcfv4th66b2w" path="res://game/characters/shadow.tscn" id="12_7l5k1"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_mbbae"]
normal = Vector2(1, 0)

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_7k8hg"]
normal = Vector2(0, 1)

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_3py6e"]
normal = Vector2(-1, 0)

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_csdmp"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_i34jf"]
size = Vector2(56, 36)

[node name="ForestJack1" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_qp3s0")

[node name="Background" type="Sprite2D" parent="."]
z_index = -1
texture = ExtResource("2_r3cgq")
centered = false
metadata/_edit_lock_ = true

[node name="Boundaries" type="Node2D" parent="."]

[node name="Left" type="StaticBody2D" parent="Boundaries"]
position = Vector2(24, 88)
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Boundaries/Left"]
shape = SubResource("WorldBoundaryShape2D_mbbae")

[node name="Top" type="StaticBody2D" parent="Boundaries"]
position = Vector2(24, 88)
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Boundaries/Top"]
shape = SubResource("WorldBoundaryShape2D_7k8hg")

[node name="Right" type="StaticBody2D" parent="Boundaries"]
position = Vector2(616, 360)
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Boundaries/Right"]
shape = SubResource("WorldBoundaryShape2D_3py6e")

[node name="Down" type="StaticBody2D" parent="Boundaries"]
position = Vector2(616, 360)
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Boundaries/Down"]
shape = SubResource("WorldBoundaryShape2D_csdmp")

[node name="Components" type="Node2D" parent="."]
y_sort_enabled = true

[node name="VineDoor" parent="Components" node_paths=PackedStringArray("forest_exit") instance=ExtResource("3_p1av2")]
position = Vector2(503, 97)
forest_exit = NodePath("ForestExit")

[node name="ForestExit" parent="Components/VineDoor" instance=ExtResource("6_0wnkg")]
visible = false
position = Vector2(1, -5)

[node name="Block" parent="Components" groups=["blocks"] instance=ExtResource("2_jganh")]
position = Vector2(270, 236)
can_push = false

[node name="BlockButton" parent="Components" instance=ExtResource("4_b62as")]
z_index = -1
position = Vector2(568, 301)

[node name="Interactable" type="Area2D" parent="Components/BlockButton"]
collision_layer = 8
collision_mask = 0
script = ExtResource("7_5s208")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Components/BlockButton/Interactable"]
position = Vector2(0, 3)
shape = SubResource("RectangleShape2D_i34jf")
debug_color = Color(0, 0.643979, 0.289855, 0.42)

[node name="IBush" type="Node2D" parent="Components"]
position = Vector2(269, 182)
metadata/_edit_group_ = true

[node name="BushForwardEnd" parent="Components/IBush" instance=ExtResource("5_sivg2")]

[node name="BushForwardMiddle" parent="Components/IBush" instance=ExtResource("6_5pwi4")]
position = Vector2(0, -60)

[node name="IBush2" type="Node2D" parent="Components"]
position = Vector2(269, 339)
metadata/_edit_group_ = true

[node name="BushForwardEnd" parent="Components/IBush2" instance=ExtResource("5_sivg2")]

[node name="BushForwardMiddle" parent="Components/IBush2" instance=ExtResource("6_5pwi4")]
position = Vector2(0, -49)

[node name="LBush" type="Node2D" parent="Components"]

[node name="ResetPoint" type="Marker2D" parent="."]
position = Vector2(102, 219)

[node name="Player" parent="." instance=ExtResource("2_3qudn")]
position = Vector2(103, 208)

[node name="Toy" parent="." node_paths=PackedStringArray("target") instance=ExtResource("3_opt1u")]
position = Vector2(69, 211)
toy_sprite = "jack"
target = NodePath("../Player")

[node name="Shadow" parent="." instance=ExtResource("12_7l5k1")]
visible = false
position = Vector2(404, 135)
scale = Vector2(-1, 1)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="DialogueManager" parent="CanvasLayer" instance=ExtResource("4_ull83")]
dialogue_file = "res://game/ui/dialogue_text/forest_jack_1.json"
portrait_directory = "res://art/Portraits"

[connection signal="body_entered" from="Components/VineDoor/ForestExit" to="." method="_on_forest_exit_body_entered"]
[connection signal="interacted" from="Components/Block" to="." method="_on_block_interacted"]
[connection signal="body_entered" from="Components/BlockButton" to="." method="_on_block_button_body_entered"]
